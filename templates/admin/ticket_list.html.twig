{# templates/ticket/list.html.twig #} {% extends 'base.html.twig' %} {% block
title %}Listes des tickets{% endblock %} {% block body %}
<h1>Listes des tickets</h1>

<div class="d-flex flex-column gap-3">
    {% for ticket in tickets %}
    <div
        class="d-flex justify-content-between align-items-center border p-3 rounded shadow-sm {% if ticket.statut and ticket.statut.statut in ['Résolu', 'Fermé'] %} bg-success bg-opacity-25 {% endif %}"
    >
        <div class="flex-grow-1">
            {# Affiche id du Ticket #}
            <strong>ID :</strong> {{ ticket.id }} <br />
            {# Affiche l'email du createur du Ticket #}
            <strong>Email client :</strong> {{ ticket.email }} <br />
            {# Affiche la date de l'ouverture du Ticket #}
            <strong>Date ouverture :</strong>
            {{ ticket.dateOuverture|date('d/m/Y H:i') }} <br />
            <strong>Date clôture :</strong>
            {# Affiche la date de fermeture du Ticket #} {% if
            ticket.dateCloture is not null %}
            {{ ticket.dateCloture|date('d/m/Y H:i') }}
            {% else %} Non clôturé {% endif %} <br />
            {# Affiche la catégorie du Ticket #}
            <strong>Catégorie :</strong> {{ ticket.categorie.nom }} <br />
            {# Affiche une courte description du Ticket #}
            <strong>Description :</strong>
            {{ ticket.description[:50] ~ (ticket.description|length > 50 ? '...' : '') }}
            <br />
            <strong>Statut :</strong>
            {% if ticket.statut is not null %} {# Affiche le statut du Ticket #}
            {{ ticket.statut.statut }}
            {% else %} Non défini {% endif %} <br />
            {# Affiche le responsable qui va gérer le problème de la demande #}
            <strong>Responsable :</strong>
            {% if ticket.responsable is not null %}
            {{ ticket.responsable.email }}
            {% else %} Non défini {% endif %}
        </div>
        <div>
            <a
                href="{{ path('app_ticket_show', { id: ticket.id }) }}"
                class="btn btn-primary btn-sm"
                >Voir</a
            >
            {# Bouton de modification #}
            <a
                href="{{ path('app_admin_ticket_edit', { id: ticket.id }) }}"
                class="btn btn-warning btn-sm ms-2"
                >Modifier</a
            >
            {# Bouton de suppression #}
            <a
                href="{{ path('app_admin_ticket_delete', { id: ticket.id }) }}"
                class="btn btn-danger btn-sm"                
            >
                Supprimer
            </a>
        </div>
    </div>
    {% else %}
    <div>Aucun ticket trouvé.</div>
    {% endfor %}
</div>

<div class="mt-4">
    <a href="{{ path('app_admin') }}" class="btn btn-secondary">Retour</a>
</div>

{% endblock %}
