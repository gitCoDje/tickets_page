{# templates/admin/user_list.html.twig #} {% extends 'base.html.twig' %} {%
block title %}Liste des utilisateurs{% endblock %} {% block body %}
<div class="container mt-4">
    <h1>Liste des utilisateurs</h1>
    <div class="d-flex flex-column gap-3">
        {% for utilisateur in utilisateurs %}
        <div
            class="d-flex justify-content-between align-items-center p-3 border rounded"
        >
            <div class="fs-5">{{ utilisateur.email }}</div>
            <div>{{ utilisateur.roles|join(', ') }}</div>
            <div>
                <a
                    href="{{
                        path('app_admin_user_edit', { id: utilisateur.id })
                    }}"
                    class="btn btn-primary btn-sm me-2"
                    >Modifier</a
                >

                {# Affiche le bouton supprimer sauf pour l'admin principal #} {%
                if utilisateur.email != 'admin@ticket.com' %}
                <a
                    href="{{
                        path('app_admin_user_delete', { id: utilisateur.id })
                    }}"
                    class="btn btn-danger btn-sm"
                    >Supprimer</a
                >
                {% endif %}
            </div>
        </div>
        {% else %}
        <div class="text-center text-muted p-3 border rounded">
            Aucun utilisateur enregistrÃ©.
        </div>
        {% endfor %}
    </div>
    <div class="mt-4">
        <a href="{{ path('app_admin_user_create') }}" class="btn btn-primary"
            >Ajouter un utilisateur</a
        >
        <a href="{{ path('app_admin') }}" class="btn btn-secondary">Retour</a>
    </div>
</div>
{% endblock %}
